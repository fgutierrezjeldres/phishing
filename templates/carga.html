<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Detector de Phishing | Carga</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Source+Sans+3:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="{{ url_for('static', filename='css/default/app.min.css') }}" rel="stylesheet" />
    <link href="{{ url_for('static', filename='css/phishing-ui.css') }}" rel="stylesheet" />
  </head>
  <body>
    <div id="page-loader" class="fade show"><span class="spinner"></span></div>
    <div class="phish-shell">
      <section class="phish-head">
        <h1>Carga de Archivos MBOX</h1>
        <small>Sube la muestra phishing y la muestra no-phishing para construir el dataset de entrenamiento.</small>
      </section>

      <div class="phish-card">
        <div class="card-header">Paso 1 de 2 · Ingreso de archivos</div>
        <div class="card-body">
          {% if error_msg %}
            <div class="alert alert-danger">
              {{ error_msg }}
            </div>
          {% endif %}
          <p class="phish-note">
            Usa archivos <strong>.mbox</strong> con estructura válida de correo. El sistema calculará automáticamente las
            características y luego habilitará el entrenamiento.
          </p>
          <form action="/generacion_dataset" method="POST" enctype="multipart/form-data">
            <div class="form-group">
              <label for="mbox-phishing"><strong>MBOX phishing</strong></label>
              <input class="form-control" type="file" id="mbox-phishing" name="pishing" accept=".mbox" required />
              <div class="phish-upload-hint">Correos maliciosos o sospechosos.</div>
            </div>

            <div class="form-group">
              <label for="mbox-no-phishing"><strong>MBOX no phishing</strong></label>
              <input class="form-control" type="file" id="mbox-no-phishing" name="nopishing" accept=".mbox" required />
              <div class="phish-upload-hint">Correos legítimos para balance de clases.</div>
            </div>

            <button type="submit" class="btn btn-primary phish-cta">Generar dataset</button>
          </form>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme/default.min.js') }}"></script>
  </body>
</html>
